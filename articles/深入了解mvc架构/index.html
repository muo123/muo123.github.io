<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="本文将深入探讨 MVC (Model-View-Controller) 架构模式，特别是在 iOS开发 中的实现、优缺点和演变。\nMVC 的核心思想：职责分离\nMVC 的核心目标是将应用程序的逻辑划分为三个清晰的角色，每个角色有明确的职责，从而降低代码的耦合度，提高可维护性和可测试性。\n">
<title>深入了解MVC架构</title>

<link rel='canonical' href='https://muo123.github.io/articles/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3mvc%E6%9E%B6%E6%9E%84/'>

<link rel="stylesheet" href="/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css"><meta property='og:title' content="深入了解MVC架构">
<meta property='og:description' content="本文将深入探讨 MVC (Model-View-Controller) 架构模式，特别是在 iOS开发 中的实现、优缺点和演变。\nMVC 的核心思想：职责分离\nMVC 的核心目标是将应用程序的逻辑划分为三个清晰的角色，每个角色有明确的职责，从而降低代码的耦合度，提高可维护性和可测试性。\n">
<meta property='og:url' content='https://muo123.github.io/articles/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3mvc%E6%9E%B6%E6%9E%84/'>
<meta property='og:site_name' content='雪国流明'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='IOS开发' /><meta property='article:published_time' content='2025-06-09T21:11:31&#43;08:00'/><meta property='article:modified_time' content='2025-06-09T21:11:31&#43;08:00'/><meta property='og:image' content='https://tc.z.wiki/autoupload/LLDBPtgBr9Urin7-1d1Bk_nFSiw33MlPagvUIGEPh-ayl5f0KlZfm6UsKj-HyTuv/20250609/sDey/743X194/image.png' />
<meta name="twitter:title" content="深入了解MVC架构">
<meta name="twitter:description" content="本文将深入探讨 MVC (Model-View-Controller) 架构模式，特别是在 iOS开发 中的实现、优缺点和演变。\nMVC 的核心思想：职责分离\nMVC 的核心目标是将应用程序的逻辑划分为三个清晰的角色，每个角色有明确的职责，从而降低代码的耦合度，提高可维护性和可测试性。\n"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://tc.z.wiki/autoupload/LLDBPtgBr9Urin7-1d1Bk_nFSiw33MlPagvUIGEPh-ayl5f0KlZfm6UsKj-HyTuv/20250609/sDey/743X194/image.png' />
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_32257c6916c5ec65.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">🧐</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">雪国流明</a></h1>
            <h2 class="site-description">心有猛虎，细嗅蔷薇</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/muo123'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>链接</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>暗色模式</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li>
      <ol>
        <li><a href="#经典-mvc-理论模型"><strong>经典 MVC 理论模型</strong></a>
          <ol>
            <li><a href="#model-模型"><strong>Model (模型)</strong></a></li>
            <li><a href="#view-视图"><strong>View (视图)</strong></a></li>
            <li><a href="#controller-控制器"><strong>Controller (控制器)</strong></a></li>
            <li><a href="#mvc-中的数据流向"><strong>MVC 中的数据流向：</strong></a></li>
          </ol>
        </li>
        <li><a href="#ios-中的-mvcmassive-view-controller问题"><strong>iOS 中的 MVC（“Massive View Controller”问题）</strong></a>
          <ol>
            <li><a href="#ios-中的-mvc-uikit-mvc现实与理论的差距"><strong>iOS 中的 MVC (UIKit MVC)：现实与理论的差距</strong></a></li>
            <li><a href="#为什么-ios-mvc-容易导致-massive-view-controller"><strong>为什么 iOS MVC 容易导致 Massive View Controller？</strong></a></li>
            <li><a href="#ios-mvc-的优点"><strong>iOS MVC 的优点：</strong></a></li>
            <li><a href="#ios-mvc-的缺点"><strong>iOS MVC 的缺点：</strong></a></li>
          </ol>
        </li>
        <li><a href="#改进-mvc-的方案减轻-controller-负担"><strong>改进 MVC 的方案（减轻 Controller 负担）</strong></a>
          <ol>
            <li><a href="#如何缓解-massive-view-controller-在-mvc-框架内"><strong>如何缓解 Massive View Controller？ (在 MVC 框架内)</strong></a></li>
            <li><a href="#mvc-的替代方案"><strong>MVC 的替代方案：</strong></a></li>
          </ol>
        </li>
        <li><a href="#总结"><strong>总结：</strong></a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/articles/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3mvc%E6%9E%B6%E6%9E%84/">
                
                    <img src="https://tc.z.wiki/autoupload/LLDBPtgBr9Urin7-1d1Bk_nFSiw33MlPagvUIGEPh-ayl5f0KlZfm6UsKj-HyTuv/20250609/sDey/743X194/image.png" loading="lazy" alt="Featured image of post 深入了解MVC架构" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E6%8A%80%E6%9C%AF/" >
                技术
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/articles/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3mvc%E6%9E%B6%E6%9E%84/">深入了解MVC架构</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2025-06-09</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 10 分钟
                </time>
            </div>
        
        <div>
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-eye"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" /><path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" /></svg>
            <time class="article-pageview">
                阅读量：<span class="waline-pageview-count" data-path="/articles/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3mvc%E6%9E%B6%E6%9E%84/">0</span>
            </time>
        </div>

        <div>
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-message"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 9h8" /><path d="M8 13h6" /><path d="M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z" /></svg>
            <time class="article-comment">
                评论数：<span class="waline-comment-count" data-path="/articles/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3mvc%E6%9E%B6%E6%9E%84/">0</span>
            </time>
        </div>
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>本文将深入探讨 <strong>MVC (Model-View-Controller)</strong> 架构模式，特别是在 <strong>iOS开发</strong> 中的实现、优缺点和演变。</p>
<p><strong>MVC 的核心思想：职责分离</strong></p>
<p>MVC 的核心目标是将应用程序的逻辑划分为三个清晰的角色，每个角色有明确的职责，从而降低代码的耦合度，提高可维护性和可测试性。</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>MyFeature/
</span></span><span style="display:flex;"><span>├── Model/
</span></span><span style="display:flex;"><span>│   ├── User.swift          // 数据模型
</span></span><span style="display:flex;"><span>│   └── DataService.swift   // 网络/数据库服务
</span></span><span style="display:flex;"><span>├── View/
</span></span><span style="display:flex;"><span>│   ├── ProfileView.swift   // 自定义视图
</span></span><span style="display:flex;"><span>│   └── ProfileCell.swift   // TableView单元格
</span></span><span style="display:flex;"><span>└── Controller/
</span></span><span style="display:flex;"><span>    └── ProfileViewController.swift // 视图控制器
</span></span></code></pre></div><h3 id="经典-mvc-理论模型"><strong>经典 MVC 理论模型</strong>
</h3><p><img src="https://tc.z.wiki/autoupload/LLDBPtgBr9Urin7-1d1Bk_nFSiw33MlPagvUIGEPh-ayl5f0KlZfm6UsKj-HyTuv/20250609/Y9Mn/841X108/image.png"
	
	
	
	loading="lazy"
	
		alt="841X108/image.png"
	
	
></p>
<p><strong>经典 MVC 数据流示意图</strong></p>
<ol>
<li><strong>用户 (User)</strong> 与 <strong>视图 (View)</strong> 交互（如点击按钮）。</li>
<li><strong>View</strong> 将用户事件传递给 <strong>控制器 (Controller)</strong>。</li>
<li><strong>Controller</strong> 处理逻辑：
<ul>
<li>更新 <strong>模型 (Model)</strong> 数据（如保存用户输入）。</li>
<li>从 <strong>Model</strong> 读取数据（如查询数据库）。</li>
</ul>
</li>
<li><strong>Model</strong> 数据变更后通知 <strong>Controller</strong>（通过观察者模式等）。</li>
<li><strong>Controller</strong> 将新数据传递给 <strong>View</strong>。</li>
<li><strong>View</strong> 根据数据更新界面，反馈给用户。</li>
</ol>
<blockquote>
<p>✅ <strong>理想情况</strong>：各层职责分离，数据流清晰。<br>
❌ <strong>iOS 现实</strong>：Controller 常过度承担逻辑，导致臃肿。</p></blockquote>
<h4 id="model-模型"><strong>Model (模型)</strong>
</h4><ul>
<li><strong>职责：</strong> 代表应用程序的核心数据和业务逻辑。</li>
<li><strong>包含什么：</strong>
<ul>
<li>数据结构（例如：<code>User</code>, <code>Product</code>, <code>Order</code> 等类或结构体）。</li>
<li>数据的操作方法（例如：创建、读取、更新、删除 - CRUD）。</li>
<li>业务规则和计算逻辑（例如：验证用户输入、计算订单总价）。</li>
<li>数据持久化操作（例如：与数据库、网络API交互的代码，虽然有时这部分会单独抽象成服务层）。</li>
</ul>
</li>
<li><strong>关键特性：</strong>
<ul>
<li><strong>独立于 UI：</strong> Model 完全不关心数据如何显示或用户如何交互。它只关注数据本身和操作数据的逻辑。</li>
<li><strong>通知变更：</strong> 当 Model 的数据发生改变时，它需要一种机制来通知相关方（通常是 Controller）。在 iOS 中，这通常通过以下几种方式实现：
<ul>
<li><strong>KVO (Key-Value Observing)：</strong> 允许对象监听另一个对象特定属性的变化。（较底层，手动管理麻烦）。</li>
<li><strong>委托模式 (Delegation)：</strong> 定义协议，Model 持有对实现了该协议的委托对象（通常是 Controller）的弱引用，并在数据变化时调用委托方法。（常用，但通常是一对一）。</li>
<li><strong>通知中心 (NotificationCenter)：</strong> 广播数据变更事件，任何注册监听的组件都可以响应。（一对多，松散耦合，但需注意内存管理和类型安全）。</li>
<li><strong>响应式编程 (Combine/RxSwift)：</strong> 使用可观察的流来处理数据变更通知。（现代、强大，但学习曲线较陡）。</li>
<li><strong>直接调用：</strong> Controller 在修改 Model 后，直接手动更新 View。（最简单，但耦合度高，容易遗漏）。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="view-视图"><strong>View (视图)</strong>
</h4><ul>
<li><strong>职责：</strong> 负责数据的可视化呈现和捕获用户的输入事件。</li>
<li><strong>包含什么：</strong>
<ul>
<li>UI 组件：<code>UIView</code> 及其子类 (<code>UILabel</code>, <code>UIButton</code>, <code>UITableView</code>, <code>UICollectionView</code>, <code>UITextField</code> 等)。</li>
<li>布局信息：Frame、Auto Layout 约束、Size Classes。</li>
<li>外观样式：颜色、字体、图片、动画效果。</li>
</ul>
</li>
<li><strong>关键特性：</strong>
<ul>
<li><strong>被动：</strong> 理想情况下，View 本身不应该包含业务逻辑。它只负责：
<ul>
<li><strong>展示：</strong> 根据 Controller 提供的数据渲染 UI。</li>
<li><strong>交互：</strong> 检测用户操作（如点击、滑动、输入）并将这些事件 <strong>传递</strong> 给 Controller 处理。View 本身不决定如何处理这些事件。</li>
</ul>
</li>
<li><strong>可复用：</strong> 设计良好的 View 组件（如自定义的 <code>UIView</code> 子类）可以在不同的界面甚至不同的项目中复用。</li>
<li><strong>独立于 Model：</strong> View 不应该直接访问或操作 Model。它应该通过 Controller 来获取展示所需的数据（通常是简单的、格式化的数据，而不是整个 Model 对象）。</li>
</ul>
</li>
</ul>
<h4 id="controller-控制器"><strong>Controller (控制器)</strong>
</h4><ul>
<li><strong>职责：</strong> 作为 <strong>Model</strong> 和 <strong>View</strong> 之间的 <strong>协调者 (Mediator)</strong> 和 <strong>胶水 (Glue)</strong>。</li>
<li><strong>包含什么：</strong> 在 iOS 中，最主要的 Controller 是 <code>UIViewController</code> 及其子类。</li>
<li><strong>关键任务：</strong>
<ul>
<li><strong>管理 View 生命周期：</strong> 响应 <code>viewDidLoad</code>, <code>viewWillAppear</code>, <code>viewDidDisappear</code> 等事件，负责创建、配置、显示和销毁 View。</li>
<li><strong>获取/更新 Model：</strong> 从数据源（数据库、网络、其他服务）获取数据并填充 Model。响应用户操作或业务逻辑要求更新 Model。</li>
<li><strong>更新 View：</strong> 监听 Model 的变化（通过 KVO、委托、通知等），获取最新的数据，并将其 <strong>格式化</strong> 后传递给 View 进行显示。</li>
<li><strong>处理用户交互：</strong> 接收来自 View 的用户事件（如按钮点击、表格行选择、文本输入完成），解释这些事件的含义，触发相应的业务逻辑（通常是更新 Model 或导航到其他界面）。</li>
<li><strong>导航：</strong> 管理视图控制器之间的切换（Push/Pop, Present/Dismiss）。</li>
<li><strong>处理其他系统事件：</strong> 如内存警告、旋转事件等。</li>
</ul>
</li>
<li><strong>关键特性：</strong>
<ul>
<li><strong>强依赖：</strong> Controller 通常需要了解具体的 View 和 Model 细节。</li>
<li><strong>核心枢纽：</strong> 大部分应用程序逻辑（尤其是与UI流程相关的）都汇聚在这里。</li>
</ul>
</li>
</ul>
<h4 id="mvc-中的数据流向"><strong>MVC 中的数据流向：</strong>
</h4><p>标准的 MVC 数据流有两种主要路径：</p>
<ol>
<li>
<p><strong>用户交互路径：</strong></p>
<ul>
<li>用户在 <strong>View</strong> 上操作（点击按钮）。</li>
<li><strong>View</strong> 将事件 <strong>通知</strong> 给 <strong>Controller</strong> (例如：通过 IBAction)。</li>
<li><strong>Controller</strong> <strong>解释</strong> 事件，执行相应的业务逻辑：
<ul>
<li>可能需要 <strong>更新 Model</strong> (例如：将商品加入购物车)。</li>
<li>可能需要 <strong>更新 View</strong> 状态 (例如：禁用按钮)。</li>
<li>可能需要 <strong>导航</strong> 到新界面。</li>
</ul>
</li>
<li>如果 Model 被更新，Model 会 <strong>通知</strong> Controller 变化发生了（如果 Controller 监听了 Model）。</li>
<li><strong>Controller</strong> 从 <strong>Model</strong> 获取 <strong>更新后的数据</strong>。</li>
<li><strong>Controller</strong> 将 <strong>格式化后的数据</strong> <strong>传递给</strong> <strong>View</strong>。</li>
<li><strong>View</strong> 根据新数据 <strong>更新其 UI</strong>。</li>
</ul>
</li>
<li>
<p><strong>Model 变更路径 (非用户直接触发)：</strong></p>
<ul>
<li>外部因素导致 <strong>Model</strong> 发生变化（例如：后台网络请求完成、定时器触发更新）。</li>
<li><strong>Model</strong> <strong>通知</strong> 其监听者（通常是 <strong>Controller</strong>）变化发生了。</li>
<li><strong>Controller</strong> 从 <strong>Model</strong> 获取 <strong>更新后的数据</strong>。</li>
<li><strong>Controller</strong> 将 <strong>格式化后的数据</strong> <strong>传递给</strong> <strong>View</strong>。</li>
<li><strong>View</strong> 根据新数据 <strong>更新其 UI</strong>。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="ios-中的-mvcmassive-view-controller问题"><strong>iOS 中的 MVC（“Massive View Controller”问题）</strong>
</h3><p><img src="https://tc.z.wiki/autoupload/LLDBPtgBr9Urin7-1d1Bk_nFSiw33MlPagvUIGEPh-ayl5f0KlZfm6UsKj-HyTuv/20250609/l8wN/878X304/image.png"
	
	
	
	loading="lazy"
	
		alt="878X304/image.png"
	
	
></p>
<p><strong>iOS MVC 的典型问题：Massive View Controller</strong></p>
<ol>
<li><strong>Model 与 View 几乎无直接交互</strong>，完全依赖 <strong>Controller</strong> 中介。</li>
<li><strong>View 与 Controller 强耦合</strong>：
<ul>
<li>通过 <code>IBOutlet</code>（视图控件引用）和 <code>IBAction</code>（事件回调）紧密绑定。</li>
</ul>
</li>
<li><strong>Controller 成为“上帝对象”</strong>：
<ul>
<li>承担 <strong>业务逻辑</strong>、<strong>网络请求</strong>、<strong>数据解析</strong>、<strong>UI 配置</strong>、<strong>导航跳转</strong> 等几乎所有职责。</li>
<li>导致代码量爆炸（数千行常见），可维护性和可测试性极差。</li>
</ul>
</li>
</ol>
<blockquote>
<p>💥 <strong>核心问题</strong>：Controller 违反 <strong>单一职责原则</strong>，变成“垃圾抽屉”。</p></blockquote>
<h4 id="ios-中的-mvc-uikit-mvc现实与理论的差距"><strong>iOS 中的 MVC (UIKit MVC)：现实与理论的差距</strong>
</h4><p>Apple 在 UIKit 框架中推广了 MVC，但其实现方式与经典的 MVC 理论有显著差异，导致了著名的 <strong>“Massive View Controller” (臃肿的视图控制器)</strong> 问题：</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">组件</th>
          <th style="text-align: left">经典 MVC 理论职责</th>
          <th style="text-align: left">iOS (UIKit) MVC 实际常见职责</th>
          <th style="text-align: left">导致的问题</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><strong>Model</strong></td>
          <td style="text-align: left">数据 + 业务逻辑</td>
          <td style="text-align: left">数据 (常为简单结构体/类)，业务逻辑常被放到 Controller 或 Service</td>
          <td style="text-align: left">Model 过于贫血，核心逻辑分散。</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>View</strong></td>
          <td style="text-align: left">纯展示 + 传递事件</td>
          <td style="text-align: left">展示 + <strong>部分布局逻辑</strong> (Storyboard/XIB/Code) + 传递事件</td>
          <td style="text-align: left">职责相对清晰，但通过 IBOutlet/IBAction 与 Controller 强耦合。</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>Controller</strong></td>
          <td style="text-align: left">协调 Model 和 View，处理事件</td>
          <td style="text-align: left"><strong>几乎包含所有非 Model/View 的代码</strong>：<br>- 业务逻辑<br>- 网络请求<br>- 数据解析<br>- 数据转换/格式化<br>- View 配置/布局 (常大量)<br>- 导航逻辑<br>- 处理 Model 变更<br>- 处理用户事件<br>- 生命周期管理<br>- 依赖管理</td>
          <td style="text-align: left"><strong>Massive View Controller!</strong> <br>代码量巨大，难以维护、测试、复用。</td>
      </tr>
  </tbody>
</table></div>
<h4 id="为什么-ios-mvc-容易导致-massive-view-controller"><strong>为什么 iOS MVC 容易导致 Massive View Controller？</strong>
</h4><ol>
<li><strong><code>UIViewController</code> 的天然定位：</strong> Apple 设计 <code>UIViewController</code> 时，就让它紧密关联着一个 <code>UIView</code> (<code>self.view</code>)，并且负责其生命周期。这使得 Controller 和 View 的界限在代码中变得模糊，开发者很容易把 View 的配置代码（本应属于 View 的职责）直接写在 Controller 里。</li>
<li><strong>Storyboard/XIB 的便利与陷阱：</strong> Interface Builder (Storyboard/XIB) 虽然能可视化设计 UI，但它将 View 的布局和部分配置（如 Auto Layout 约束）以序列化形式存储。Controller 需要通过 <code>IBOutlet</code> 连接到这些 View 元素进行动态操作。这种强连接鼓励了在 Controller 中直接操作 View 细节。</li>
<li><strong>事件处理 (IBAction)：</strong> <code>IBAction</code> 方法直接定义在 Controller 中，处理用户交互的逻辑自然就写在了 Controller 里。</li>
<li><strong>缺少明确的中间层：</strong> 经典的 MVC 中，Controller 应该是薄薄的一层协调者。但在 iOS 实践中，由于没有强制分离的规则，业务逻辑、数据转换、网络交互等本可以独立出来的逻辑，都因为方便而被塞进了 Controller。</li>
<li><strong>Model 的“贫血”：</strong> 很多 iOS 开发者习惯将 Model 设计为仅包含数据的简单结构（贫血模型），而将操作这些数据的业务逻辑放在 Controller 中，进一步加重了 Controller 的负担。</li>
</ol>
<h4 id="ios-mvc-的优点"><strong>iOS MVC 的优点：</strong>
</h4><ul>
<li><strong>简单直观：</strong> 概念清晰，上手容易，尤其适合小型项目或原型开发。</li>
<li><strong>Apple 官方支持：</strong> UIKit 框架本身的设计就是围绕 MVC 构建的，有大量的文档、教程和示例代码。</li>
<li><strong>工具集成：</strong> Storyboard/XIB 与 <code>UIViewController</code> 的集成非常紧密。</li>
<li><strong>生命周期管理：</strong> <code>UIViewController</code> 提供了明确的视图生命周期钩子。</li>
</ul>
<h4 id="ios-mvc-的缺点"><strong>iOS MVC 的缺点：</strong>
</h4><ul>
<li><strong>Massive View Controller：</strong> 这是最核心的痛点，导致代码臃肿、难以阅读、维护困难、复用性差。</li>
<li><strong>难以单元测试：</strong> Controller 通常依赖 <code>UIKit</code> 组件（如 <code>UIView</code>, <code>UIViewController</code> 生命周期）、网络请求、数据库等，使得对其进行隔离单元测试变得复杂且脆弱。庞大的 Controller 也意味着测试用例会非常庞大。</li>
<li><strong>紧耦合：</strong> View 和 Controller 通过 <code>IBOutlet</code>/<code>IBAction</code> 紧密耦合，难以独立复用或替换。Controller 通常也直接知晓具体的 Model 和 View 细节。</li>
<li><strong>职责模糊：</strong> 业务逻辑、数据转换、UI 更新逻辑混杂在 Controller 中，违反了单一职责原则。</li>
<li><strong>代码复用性差：</strong> 与特定 View 强关联的逻辑很难在其他地方复用。</li>
</ul>
<hr>
<h3 id="改进-mvc-的方案减轻-controller-负担"><strong>改进 MVC 的方案（减轻 Controller 负担）</strong>
</h3><p><img src="https://tc.z.wiki/autoupload/LLDBPtgBr9Urin7-1d1Bk_nFSiw33MlPagvUIGEPh-ayl5f0KlZfm6UsKj-HyTuv/20250609/Q8S8/792X496/image.png"
	
	
	
	loading="lazy"
	
		alt="792X496/image.png"
	
	
></p>
<p><strong>缓解 Massive View Controller 的实践</strong></p>
<ol>
<li><strong>抽取独立组件</strong>：
<ul>
<li><strong>Service 层</strong>：封装网络请求、数据库操作。</li>
<li><strong>DataSource 对象</strong>：处理 <code>UITableView</code>/<code>UICollectionView</code> 的数据源逻辑。</li>
<li><strong>Utils 工具类</strong>：提供格式化、校验等辅助函数。</li>
</ul>
</li>
<li><strong>Controller 仅保留核心协调职责</strong>：
<ul>
<li>初始化组件、响应生命周期事件、高层导航决策。</li>
</ul>
</li>
<li><strong>Model 升级为“富模型”</strong>：
<ul>
<li>包含业务逻辑（如 <code>User.validatePassword()</code>）。</li>
</ul>
</li>
<li><strong>View 封装自定义控件</strong>：
<ul>
<li>将布局代码移入 <code>UIView</code> 子类，减少 Controller 内 UI 代码。</li>
</ul>
</li>
</ol>
<blockquote>
<p>✅ <strong>效果</strong>：Controller 瘦身，代码可读性和可测试性提升。</p></blockquote>
<h4 id="如何缓解-massive-view-controller-在-mvc-框架内"><strong>如何缓解 Massive View Controller？ (在 MVC 框架内)</strong>
</h4><p>即使坚持使用 MVC，也可以通过一些实践来减轻 Controller 的负担：</p>
<ol>
<li><strong>富 Model (Rich Model)：</strong> 将业务逻辑尽可能地移动到 Model 中。让 Model 不仅仅是一个数据结构，而是包含操作这些数据的方法。例如，<code>User</code> 模型可以有 <code>changePassword</code> 方法，内部处理验证逻辑。</li>
<li><strong>数据源和委托分离：</strong> 对于 <code>UITableView</code> 或 <code>UICollectionView</code>，将其 <code>dataSource</code> 和 <code>delegate</code> 分离到独立的类中（例如 <code>MyTableDataSource</code>），而不是让 Controller 直接实现所有协议方法。</li>
<li><strong>创建 Helper/Utility 类：</strong> 将通用的工具方法、格式化逻辑、网络请求封装等提取到独立的 Helper 或 Service 类中。</li>
<li><strong>使用 Child View Controllers：</strong> 将复杂界面拆分成多个逻辑区域，每个区域由自己的 Child View Controller 管理，父 Controller 负责协调。</li>
<li><strong>避免在 Controller 中做复杂的 View 布局：</strong> 尽量使用 Auto Layout（在 Interface Builder 或代码中），并将自定义 View 的布局逻辑封装在 <code>UIView</code> 子类中。Controller 只负责提供数据和处理高层事件。</li>
<li><strong>谨慎使用 Storyboard Segues：</strong> 避免在 Segue 的 <code>prepareForSegue</code> 方法中塞入过多的数据准备和逻辑。考虑使用更明确的导航方法或路由机制。</li>
<li><strong>利用扩展 (Extensions)：</strong> 将 Controller 中不同职责的代码划分到不同的扩展文件中（例如 <code>MyViewController+Network.swift</code>, <code>MyViewController+TableView.swift</code>），提高可读性，但逻辑上还在同一个类里。</li>
</ol>
<h4 id="mvc-的替代方案"><strong>MVC 的替代方案：</strong>
</h4><p>为了解决 MVC 在 iOS 中固有的问题，出现了多种替代架构模式：</p>
<ul>
<li><strong>MVVM (Model-View-ViewModel)：</strong> 引入 ViewModel 层，负责将 Model 数据转换为 View 可直接显示的数据，并包含视图相关的状态和命令。View 和 ViewModel 通过数据绑定（如 Combine, RxSwift）连接，大大减少了 Controller（或 View，在 SwiftUI 中）的职责。<strong>这是目前最流行的替代方案，尤其适合 SwiftUI。</strong></li>
<li><strong>VIPER (View-Interactor-Presenter-Entity-Router)：</strong> 将职责划分得更加细致（路由、业务逻辑、展示逻辑、实体），每个组件职责单一且明确，可测试性极高。但引入的复杂性和文件数量也显著增加，适合大型、长期维护的项目。</li>
<li><strong>MVP (Model-View-Presenter)：</strong> 类似于 MVVM，但 View 和 Presenter 之间通常通过接口/协议进行通信，强调被动 View。在 iOS 中不如 MVVM 流行。</li>
<li><strong>Clean Architecture / TCA (The Composable Architecture)：</strong> 强调分层（Entities, Use Cases, Interface Adapters, Frameworks &amp; Drivers）、依赖规则（依赖向内指向核心业务逻辑）、单向数据流。TCA 是基于 Swift 的一个具体实现，结合了 Elm 和 Redux 的思想，提供强大的状态管理和可测试性。</li>
</ul>
<hr>
<h3 id="总结"><strong>总结：</strong>
</h3><p>MVC 是一个基础且重要的架构模式，理解其核心思想和在 iOS 中的具体实现（以及由此引发的 Massive View Controller 问题）是 iOS 开发者的必备知识。虽然它在小型项目或简单界面上仍然有效且快速，但在面对复杂应用时，其缺点会变得非常突出。</p>
<p><strong>对于新项目：</strong></p>
<ul>
<li>如果主要使用 <strong>SwiftUI</strong>，MVVM 是非常自然且推荐的选择。</li>
<li>如果主要使用 <strong>UIKit</strong>，强烈推荐学习和采用 <strong>MVVM</strong>（通常结合 Combine 或 RxSwift 进行数据绑定）来避免 Massive View Controller。VIPER 或 Clean Architecture/TCA 是更高级的选择，适用于对可维护性、可测试性要求极高的大型项目。</li>
</ul>
<p><strong>对于维护遗留的 UIKit MVC 项目：</strong> 了解 MVC 的原理和问题所在，并逐步应用上述的“缓解策略”进行重构，或者在有条件和收益的情况下，逐步向 MVVM 等模式迁移部分功能模块。</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/ios%E5%BC%80%E5%8F%91/">IOS开发</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    <script src='//unpkg.com/@waline/client@v2/dist/waline.js'></script>
<link href='//unpkg.com/@waline/client@v2/dist/waline.css' rel='stylesheet'/>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
        --waline-font-size: var(--article-font-size);
    }
    .waline-container .wl-count {
        color: var(--card-text-color-main);
    }
</style><script>
    
    Waline.init({"comment":true,"dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":false,"imageUploader":false,"lang":"zh-CN","locale":{"admin":"Admin","placeholder":null},"pageview":true,"reaction":false,"requiredMeta":["name"],"search":false,"serverURL":"https://waline-pipyeemst-muo123s-projects.vercel.app"});
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 muo123
    </section>
    
    <section class="powerby">
        使用 <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> 构建 <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.30.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>


        
        
    </body>
</html>
